{"remainingRequest":"E:\\vue-projects\\QFTest\\qftest-front\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!E:\\vue-projects\\QFTest\\qftest-front\\src\\components\\Units\\LoginForm.vue?vue&type=style&index=0&id=bc36e6e6&lang=css","dependencies":[{"path":"E:\\vue-projects\\QFTest\\qftest-front\\src\\components\\Units\\LoginForm.vue","mtime":1647388266121},{"path":"E:\\vue-projects\\QFTest\\qftest-front\\node_modules\\css-loader\\dist\\cjs.js","mtime":1647388208165},{"path":"E:\\vue-projects\\QFTest\\qftest-front\\node_modules\\vue-loader-v16\\dist\\stylePostLoader.js","mtime":1647388262306},{"path":"E:\\vue-projects\\QFTest\\qftest-front\\node_modules\\postcss-loader\\src\\index.js","mtime":1647388229687},{"path":"E:\\vue-projects\\QFTest\\qftest-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1647388190513},{"path":"E:\\vue-projects\\QFTest\\qftest-front\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1647388262278}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQoubG9naW4tZm9ybSAuaXQtaW5wdXQtcHJlZml4LXdyYXBwZXJ7DQogIG1hcmdpbi1ib3R0b206IDZweCAhaW1wb3J0YW50Ow0KfQ0KLmgtZW50ZXItdmt7DQogIGRpc3BsYXk6IGJsb2NrOw0KICBoZWlnaHQ6IDQxcHg7DQp9DQo="},{"version":3,"sources":["E:\\vue-projects\\QFTest\\qftest-front\\src\\components\\Units\\LoginForm.vue"],"names":[],"mappings":";AAgEA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EAClC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAC/B;AACA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACT,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;EACd,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AACd","file":"E:/vue-projects/QFTest/qftest-front/src/components/Units/LoginForm.vue","sourceRoot":"","sourcesContent":["<template>\r\n  <div class=\"login-form\">\r\n    <br>\r\n    <div>Необходимо выполнить вход</div><br>\r\n    <it-input prefix=\"Логин\" v-model=\"login\" @keyup.enter=\"goToPasswordInput\"/>\r\n    <it-input prefix=\"Пароль\" ref=\"password\" type=\"password\" v-model=\"password\" @keyup.enter=\"enterDef\" />\r\n    <it-button block :type=\"'primary'\" style='height: 41px;' @click=\"enterDef\" outlined>Войти</it-button>\r\n    <it-divider/>\r\n    <it-button block :type=\"'primary'\" class='h-enter-vk' @click=\"enterVK\">Войти через Вконтакте</it-button>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {mapActions} from 'vuex'\r\n\r\nexport default {\r\n  setup() {\r\n    \r\n  },\r\n  data(){\r\n    return{\r\n      waitingLogin: false,\r\n      login: '',\r\n      password: '',\r\n    }\r\n  },\r\n  methods:{\r\n    ...mapActions([\"LOAD_USER\"]),\r\n    enterVK(){//Вход через Вконтакте\r\n      document.location = this.conf.VK_AUTH_URL;\r\n    },\r\n    enterDef(){//Вход через стандартный аккаунт\r\n      this.waitingLogin = true;\r\n      this.axios.post(this.conf.AUTH_URL, {\r\n        login: this.login,\r\n        password: this.password,\r\n        sn: 'def'\r\n      }).then(respon => {\r\n        this.waitingLogin = false;\r\n        if(!respon.data?.error){\r\n              localStorage.setItem('usr_id', respon.data.usr_id);\r\n              localStorage.setItem('mykey', respon.data.mykey);\r\n\r\n              this.LOAD_USER();\r\n              this.$router.push('/');\r\n        }else{\r\n          this.$error(\"Ошибка авторизации\", respon.data?.error || \"Неизвестная ошибка\");\r\n        }\r\n      }).catch(()=>{ \r\n        this.waitingLogin = false;\r\n        this.$error(\"Ошибка авторизации\", \"Проблемы с соединением\");\r\n        });\r\n    },\r\n    goToPasswordInput(){\r\n      let inp = this.$refs.password.$el.getElementsByTagName(\"input\");\r\n      if(inp){\r\n        inp[0].focus();\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n.login-form .it-input-prefix-wrapper{\r\n  margin-bottom: 6px !important;\r\n}\r\n.h-enter-vk{\r\n  display: block;\r\n  height: 41px;\r\n}\r\n</style>"]}]}