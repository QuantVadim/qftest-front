{"remainingRequest":"D:\\vue-projects\\rutest\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!D:\\vue-projects\\rutest\\src\\views\\pages\\TestEditor.vue?vue&type=style&index=0&id=32e43b1e&lang=css","dependencies":[{"path":"D:\\vue-projects\\rutest\\src\\views\\pages\\TestEditor.vue","mtime":1638887568825},{"path":"D:\\vue-projects\\rutest\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue-projects\\rutest\\node_modules\\vue-loader-v16\\dist\\stylePostLoader.js","mtime":1616796459000},{"path":"D:\\vue-projects\\rutest\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\vue-projects\\rutest\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue-projects\\rutest\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1616796459000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci50ZXN0LWhlYWRlci13cmFwcGVyIC5jb250ZW50ewogIGRpc3BsYXk6IGdyaWQ7CiAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxMTBweCAxZnI7Cn0KdGV4dGFyZWEuaXQtdGV4dGFyZWEgewogIG92ZXJmbG93OiBoaWRkZW4gIWltcG9ydGFudDsKfQo="},{"version":3,"sources":["D:\\vue-projects\\rutest\\src\\views\\pages\\TestEditor.vue"],"names":[],"mappings":";AA+IA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EAC3B,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EACb,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;AAClC;AACA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACnB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAC7B","file":"D:/vue-projects/rutest/src/views/pages/TestEditor.vue","sourceRoot":"","sourcesContent":["<template>\n  <div v-if=\"MYID\">\n    <div v-if=\"test != undefined\">\n      <block class=\"test-header-wrapper\">\n        <div>\n          <it-avatar\n            class=\"test-ico-full\"\n            style=\"cursor: pointer\"\n            size=\"100px\"\n            square\n            :src=\"test?.ico_url\"\n            :text=\"test.name\"\n            @click=\"isImageSelector = true\"\n          />\n        </div>\n        <div>\n          <it-input v-model=\"test.name\" placeholder=\"Название\"></it-input>\n          <it-textarea\n            v-model=\"test.description\"\n            :resize-on-write=\"true\"\n            placeholder=\"Описание\"\n          ></it-textarea>\n        </div>\n      </block>\n      <TestQuests :data=\"test.body\" :mode=\"'editor'\" />\n      <block>\n        <it-button block @click=\"SaveTest\">Сохранить</it-button>\n      </block>\n    </div>\n    <div v-else-if=\"error == false\" class=\"center-loading\">\n      <it-loading></it-loading><br />\n      <div>Загрузка</div>\n    </div>\n    <div v-else>\n      <block>\n        <it-alert\n          type=\"danger\"\n          :title=\"'Ошибка'\"\n          :body=\"'У вас нет доступа к этопу объекту'\"\n        />\n      </block>\n    </div>\n    <it-modal v-model=\"isImageSelector\">\n      <template #header>\n        <h3 style=\"margin: 0px\">Выбор изображения</h3>\n      </template>\n      <template #body>\n        <ImageSelector @select=\"SelectImage\" @close=\"isImageSelector = false\" />\n      </template>\n      <template #actions>\n        <it-button @click=\"isImageSelector = false\">Отмена</it-button>\n        <!-- <it-button :loading=\"isDeletingGTest\" @click=\"DeleteGTest\" type=\"danger\">Удалить</it-button> -->\n      </template>\n    </it-modal>\n  </div>\n  <div v-else>\n    <block>\n      <it-alert\n        type=\"danger\"\n        :title=\"'Нет доступа'\"\n        :body=\"'Необходимо авторизироваться'\"\n      />\n    </block>\n  </div>\n</template>\n\n<script>\nimport TestQuests from \"../../components/TestQuests\";\n//import Button from \"primevue/button\";\nimport ImageSelector from \"@/components/Menus/ImageSelector\";\n\nexport default {\n  components: {\n    TestQuests,\n    //Button,\n    ImageSelector,\n  },\n  computed: {\n    MYID() {\n      return this.$store.getters.MYID;\n    },\n  },\n  data() {\n    return {\n      isImageSelector: false,\n      test: undefined,\n      error: false,\n    };\n  },\n  beforeRouteLeave() {\n    return confirm(\"Вы уверены, что хотите уйти?\");\n  },\n  methods: {\n    SaveTest() {\n      let obj = {\n        q: \"test_save\",\n        me: this.$store.state.ME.data,\n        test: this.test,\n      };\n      this.axios.post(this.apiurl, obj).then((itm) => {\n        console.log(itm.data);\n        if (itm.data?.data) {\n          let test_id = itm.data?.data;\n          this.$router.replace({ path: `/test/${test_id}/editor` });\n        }\n      });\n    },\n    SelectImage(img) {\n      if (this.test != undefined) {\n        this.test.ico_url = img.url;\n        this.test.ico = img.img_id;\n      }\n    },\n  },\n  created() {\n    if (this.$route.params.id == \"new\") {\n      this.test = {\n        test_id: this.$route.params.id,\n        usr_id: this.MYID,\n        name: \"Новый тест\",\n        description: \"\",\n        body: [],\n      };\n    } else {\n      let obj = {\n        q: \"get_test_editor\",\n        me: this.$store.state.ME.data,\n        test_id: this.$route.params.id,\n      };\n      this.axios.post(this.apiurl, obj).then((itm) => {\n        console.log(itm.data);\n        if (itm.data?.data) {\n          this.test = itm.data.data;\n        } else if (itm.data?.error) {\n          this.error = itm.data.error;\n        }\n      });\n    }\n  },\n};\n</script>\n\n<style>\n.test-header-wrapper .content{\n  display: grid;\n  grid-template-columns: 110px 1fr;\n}\ntextarea.it-textarea {\n  overflow: hidden !important;\n}\n</style>\n"]}]}