{"remainingRequest":"D:\\vue-projects\\rutest\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!D:\\vue-projects\\rutest\\src\\components\\Items\\User.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\vue-projects\\rutest\\src\\components\\Items\\User.vue","mtime":1624028250570},{"path":"D:\\vue-projects\\rutest\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue-projects\\rutest\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\vue-projects\\rutest\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue-projects\\rutest\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1616796459000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgU3BsaXRCdXR0b24gZnJvbSAicHJpbWV2dWUvc3BsaXRidXR0b24iOw0KZXhwb3J0IGRlZmF1bHQgew0KICBjb21wb25lbnRzOiB7DQogICAgU3BsaXRCdXR0b24sDQogIH0sDQogIHByb3BzOiBbImRhdGEiLCAiaW5kZXgiXSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgaXNXYWl0aW5nQWN0aW9uOiBmYWxzZSwNCiAgICAgIFJlcUFjdGlvbnM6IFsNCiAgICAgICAgew0KICAgICAgICAgIGxhYmVsOiAi0JjQt9C80LXQvdC40YLRjCIsDQogICAgICAgICAgaWNvbjogInBpIHBpLXBlbmNpbCIsDQogICAgICAgICAgY29tbWFuZDogKCkgPT4gew0KICAgICAgICAgICAgaWYodGhpcy5pc1dhaXRpbmdBY3Rpb24pIHJldHVybjsNCiAgICAgICAgICAgIHRoaXMuJGVtaXQoJ2VkaXQnLCB0aGlzLmluZGV4KTsNCiAgICAgICAgICB9LA0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAgbGFiZWw6ICLQo9C00LDQu9C40YLRjCIsDQogICAgICAgICAgaWNvbjogInBpIHBpLXRpbWVzIiwNCiAgICAgICAgICBjb21tYW5kOiAoKSA9PiB7DQogICAgICAgICAgICBpZih0aGlzLmlzV2FpdGluZ0FjdGlvbikgcmV0dXJuOw0KICAgICAgICAgICAgdGhpcy4kZW1pdCgnZGVsZXRlJywgdGhpcy5pbmRleCk7DQogICAgICAgICAgfSwNCiAgICAgICAgfSwNCiAgICAgICAgDQogICAgICBdLA0KICAgIH07DQogIH0sDQogIGNyZWF0ZWQoKXtjb25zb2xlLmxvZyh0aGlzLmluZGV4KX0sDQogIGNvbXB1dGVkOiB7DQogICAgdXNlck5hbWUoKSB7DQogICAgICByZXR1cm4gdGhpcy5kYXRhPy5uYW1lDQogICAgICAgID8gdGhpcy5kYXRhLm5hbWUNCiAgICAgICAgOiB0aGlzLmRhdGEuZmlyc3RfbmFtZSArIHRoaXMuZGF0YS5sYXN0X25hbWU7DQogICAgfSwNCiAgfSwNCiAgbWV0aG9kczp7DQogICAgYWNjZXB0VXNlcigpew0KICAgICAgaWYodGhpcy5pc1dhaXRpbmdBY3Rpb24pIHJldHVybjsNCiAgICAgIHRoaXMuaXNXYWl0aW5nQWN0aW9uID0gdHJ1ZTsNCiAgICAgIGxldCBvYmogPSB7DQogICAgICAgIHE6ICdqb2luX3JlcXVlc3RfYWN0aW9uJywNCiAgICAgICAgbWU6IHRoaXMuJHN0b3JlLnN0YXRlLk1FLmRhdGEsDQogICAgICAgIGFjdGlvbjogJ3NldF9hY2NlcHRlZCcsDQogICAgICAgIGFjY2VwdGVkOiB0aGlzLmRhdGEuYWNjZXB0ZWQgPT0gZmFsc2UsDQogICAgICAgIHJlcV9pZDogdGhpcy5kYXRhLnJlcV9pZCwNCiAgICAgIH0NCiAgICAgIGNvbnNvbGUubG9nKG9iaik7DQogICAgICB0aGlzLmF4aW9zLnBvc3Qod2luZG93LmMuQVBJLCBvYmopLnRoZW4oaXRtPT57DQogICAgICAgIGNvbnNvbGUubG9nKGl0bS5kYXRhKTsNCiAgICAgICAgaWYoaXRtLmRhdGE/LmRhdGEpew0KICAgICAgICAgIHRoaXMuJGVtaXQoJ3VwZGF0ZV9pdGVtJywgaXRtLmRhdGEuZGF0YSwgdGhpcz8uaW5kZXgpOw0KICAgICAgICAgIHRoaXMuaXNXYWl0aW5nQWN0aW9uID0gZmFsc2U7DQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgIH0NCiAgfQ0KfTsNCg=="},{"version":3,"sources":["D:\\vue-projects\\rutest\\src\\components\\Items\\User.vue"],"names":[],"mappings":"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","file":"D:/vue-projects/rutest/src/components/Items/User.vue","sourceRoot":"","sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"user-item-name-row\">\r\n      <it-avatar :src=\"data?.avatar\" />\r\n      <div class=\"user-name\">\r\n        <span>{{ userName }}</span>\r\n        <span v-if=\"data.req_id\"\r\n          ><SplitButton\r\n            v-if=\"data?.accepted != undefined\"\r\n            :label=\"data?.accepted == 0 ? 'Принять' : 'Отклонить'\"\r\n            :model=\"ReqActions\"\r\n            @click=\"acceptUser\"\r\n            :class=\"{'p-button-gray': this.data.accepted == 1}\"\r\n            class=\"p-button-secondary\"\r\n        /></span>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport SplitButton from \"primevue/splitbutton\";\r\nexport default {\r\n  components: {\r\n    SplitButton,\r\n  },\r\n  props: [\"data\", \"index\"],\r\n  data() {\r\n    return {\r\n      isWaitingAction: false,\r\n      ReqActions: [\r\n        {\r\n          label: \"Изменить\",\r\n          icon: \"pi pi-pencil\",\r\n          command: () => {\r\n            if(this.isWaitingAction) return;\r\n            this.$emit('edit', this.index);\r\n          },\r\n        },\r\n        {\r\n          label: \"Удалить\",\r\n          icon: \"pi pi-times\",\r\n          command: () => {\r\n            if(this.isWaitingAction) return;\r\n            this.$emit('delete', this.index);\r\n          },\r\n        },\r\n        \r\n      ],\r\n    };\r\n  },\r\n  created(){console.log(this.index)},\r\n  computed: {\r\n    userName() {\r\n      return this.data?.name\r\n        ? this.data.name\r\n        : this.data.first_name + this.data.last_name;\r\n    },\r\n  },\r\n  methods:{\r\n    acceptUser(){\r\n      if(this.isWaitingAction) return;\r\n      this.isWaitingAction = true;\r\n      let obj = {\r\n        q: 'join_request_action',\r\n        me: this.$store.state.ME.data,\r\n        action: 'set_accepted',\r\n        accepted: this.data.accepted == false,\r\n        req_id: this.data.req_id,\r\n      }\r\n      console.log(obj);\r\n      this.axios.post(window.c.API, obj).then(itm=>{\r\n        console.log(itm.data);\r\n        if(itm.data?.data){\r\n          this.$emit('update_item', itm.data.data, this?.index);\r\n          this.isWaitingAction = false;\r\n        }\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n\r\n.p-button-gray.p-splitbutton button{\r\n  background-color: #F1F0F5 !important;\r\n  color: rgb(124, 124, 124) !important;\r\n  border-color: rgb(204, 204, 204) !important;\r\n}\r\n.user-item-name-row {\r\n  display: grid;\r\n  grid-template-columns: auto 1fr;\r\n}\r\n\r\n.user-item-name-row .user-name {\r\n  display: grid;\r\n  grid-template-columns: 1fr auto;\r\n  margin: 3px 0px 3px 6px;\r\n  line-height: 34px;\r\n}\r\n</style>"]}]}