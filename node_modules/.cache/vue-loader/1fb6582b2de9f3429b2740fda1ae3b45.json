{"remainingRequest":"E:\\vue-projects\\QFTest\\qftest-front\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!E:\\vue-projects\\QFTest\\qftest-front\\src\\views\\pages\\TestEditor.vue?vue&type=style&index=0&id=2402af04&lang=css","dependencies":[{"path":"E:\\vue-projects\\QFTest\\qftest-front\\src\\views\\pages\\TestEditor.vue","mtime":1647388266184},{"path":"E:\\vue-projects\\QFTest\\qftest-front\\node_modules\\css-loader\\dist\\cjs.js","mtime":1647388208165},{"path":"E:\\vue-projects\\QFTest\\qftest-front\\node_modules\\vue-loader-v16\\dist\\stylePostLoader.js","mtime":1647388262306},{"path":"E:\\vue-projects\\QFTest\\qftest-front\\node_modules\\postcss-loader\\src\\index.js","mtime":1647388229687},{"path":"E:\\vue-projects\\QFTest\\qftest-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1647388190513},{"path":"E:\\vue-projects\\QFTest\\qftest-front\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1647388262278}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQoudGVzdC1oZWFkZXItd3JhcHBlciAuY29udGVudHsNCiAgZGlzcGxheTogZ3JpZDsNCiAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxMTBweCAxZnI7DQp9DQp0ZXh0YXJlYS5pdC10ZXh0YXJlYSB7DQogIG92ZXJmbG93OiBoaWRkZW4gIWltcG9ydGFudDsNCn0NCg0KDQoud2luLXJlc3VsdC5wLXNpZGViYXIgew0KICBoZWlnaHQ6IDEwMHZoICFpbXBvcnRhbnQ7DQogIGJhY2tncm91bmQtY29sb3I6IHJnYigyMDYsIDIwNiwgMjA2KTsNCn0NCi53aW4tcmVzdWx0IC5wLXNpZGViYXItaGVhZGVyIHsNCiAgYm94LXNoYWRvdzogMHB4IDhweCA4cHggI2NlY2VjZTsNCiAgei1pbmRleDogMTsNCn0NCi53aW4tcmVzdWx0IC5wLXNpZGViYXItaGVhZGVyOjpiZWZvcmV7DQogIGNvbnRlbnQ6ICfQn9Cw0L/QutCwJzsNCiAgZm9udC1zaXplOiAyMnB4Ow0KICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTsNCiAgcGFkZGluZzogNnB4Ow0KICBtYXJnaW4tdG9wOiAtNHB4Ow0KICBib3JkZXItcmFkaXVzOiA2cHg7DQogIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgbGVmdDogMTBweDsNCn0NCi53aW4tcmVzdWx0IC5zaWRlYmFyLWNvbmVudC1jZW50ZXIgew0KICBtYXgtd2lkdGg6IDcwMHB4Ow0KICBtYXJnaW46IGF1dG87DQp9DQoud2luLXJlc3VsdCAucC1zaWRlYmFyLWNvbnRlbnQgew0KICBtYXJnaW46IDBweDsNCiAgcGFkZGluZzogMHB4Ow0KfQ0K"},{"version":3,"sources":["E:\\vue-projects\\QFTest\\qftest-front\\src\\views\\pages\\TestEditor.vue"],"names":[],"mappings":"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","file":"E:/vue-projects/QFTest/qftest-front/src/views/pages/TestEditor.vue","sourceRoot":"","sourcesContent":["<template>\r\n  <div v-if=\"MYID\">\r\n    <div v-if=\"test != undefined\">\r\n      <block class=\"test-header-wrapper\">\r\n        <div>\r\n          <it-avatar\r\n            class=\"test-ico-full\"\r\n            style=\"cursor: pointer\"\r\n            size=\"100px\"\r\n            square\r\n            :src=\"test?.ico_url\"\r\n            :text=\"test.name\"\r\n            @click=\"isImageSelector = true\"\r\n          />\r\n        </div>\r\n        <div>\r\n          <it-input v-model=\"test.name\" placeholder=\"Название\"></it-input>\r\n          <it-textarea\r\n            v-model=\"test.description\"\r\n            :resize-on-write=\"true\"\r\n            placeholder=\"Описание\"\r\n          ></it-textarea>\r\n        </div>\r\n      </block>\r\n      <TestQuests :data=\"test.body\" :mode=\"'editor'\" @change-list=\"SetBody\" />\r\n      <block>\r\n        <it-button block @click=\"SaveTest\">Сохранить</it-button>\r\n      </block>\r\n    </div>\r\n    <div v-else-if=\"error == false\" class=\"center-loading\">\r\n      <it-loading></it-loading><br />\r\n      <div>Загрузка</div>\r\n    </div>\r\n    <div v-else>\r\n      <block>\r\n        <it-alert\r\n          type=\"danger\"\r\n          :title=\"'Ошибка'\"\r\n          :body=\"'У вас нет доступа к этому объекту'\"\r\n        />\r\n      </block>\r\n    </div>\r\n    <it-modal v-model=\"isImageSelector\">\r\n      <template #header>\r\n        <h3 style=\"margin: 0px\">Выбор изображения</h3>\r\n      </template>\r\n      <template #body>\r\n        <ImageSelector @select=\"SelectImage\" @close=\"isImageSelector = false\" img-type='ico' />\r\n      </template>\r\n      <template #actions>\r\n        <it-button @click=\"isImageSelector = false\">Отмена</it-button>\r\n        <!-- <it-button :loading=\"isDeletingGTest\" @click=\"DeleteGTest\" type=\"danger\">Удалить</it-button> -->\r\n      </template>\r\n    </it-modal>\r\n    <Sidebar\r\n      v-model:visible=\"isFolder\"\r\n      position=\"bottom\"\r\n      class=\"win-result\"\r\n    >\r\n      <div class=\"sidebar-conent-center\">\r\n        <main class=\"main\">\r\n          <TestQuests :data=\"folder?.body\" :mode=\"'editor'\" @change-list=\"SetBodyFolder\" />\r\n        </main>\r\n      </div>\r\n    </Sidebar>\r\n  </div>\r\n  <div v-else>\r\n    <block>\r\n      <it-alert\r\n        type=\"danger\"\r\n        :title=\"'Нет доступа'\"\r\n        :body=\"'Необходимо авторизироваться'\"\r\n      />\r\n    </block>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport TestQuests from \"../../components/TestQuests\";\r\n//import Button from \"primevue/button\";\r\nimport ImageSelector from \"@/components/Menus/ImageSelector\";\r\nimport Sidebar from \"primevue/sidebar\";\r\n\r\nexport default {\r\n  components: {\r\n    TestQuests,\r\n    Sidebar,\r\n    //Button,\r\n    ImageSelector,\r\n  },\r\n  computed: {\r\n    MYID() {\r\n      return this.$store.getters.MYID;\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      isImageSelector: false,\r\n      test: undefined,\r\n      error: false,\r\n\r\n      folder: undefined,\r\n      isFolder: false,\r\n    };\r\n  },\r\n  beforeRouteLeave() {\r\n    return confirm(\"Вы уверены, что хотите уйти?\");\r\n  },\r\n  methods: {\r\n    SaveTest() {\r\n      let obj = {\r\n        q: \"test_save\",\r\n        me: this.$store.state.ME.data,\r\n        test: this.test,\r\n      };\r\n      this.axios.post(this.apiurl, obj).then((itm) => {\r\n        console.log(itm.data);\r\n        if (itm.data?.data) {\r\n          let test_id = itm.data?.data;\r\n          this.$router.replace({ path: `/test/${test_id}/editor` });\r\n          this.$success(\"Сохранение теста\", \"Тест был успешно сохранен\");\r\n        }\r\n      }).catch(()=>{\r\n        this.$error(\"Ошибка сохранения теста\", \"При сохранении теста поизошла ошибка\");\r\n      });\r\n    },\r\n    SelectImage(img) {\r\n      if (this.test != undefined) {\r\n        this.test.ico_url = img.url;\r\n        this.test.ico = img.img_id;\r\n      }\r\n    },\r\n    SetBody(items){\r\n      if(this.test?.body){\r\n        this.test.body = items;\r\n      }\r\n        \r\n    },\r\n    SetBodyFolder(items){\r\n      if(this?.folder){\r\n        this.folder.body = items;\r\n      }\r\n      console.log(items);\r\n    }\r\n  },\r\n  watch: {\r\n    'isFolder'(newV){\r\n      if(!newV && this.$route.query?.folder){\r\n        this.$router.go(-1);\r\n      }\r\n      return this.isFolder;\r\n    },\r\n    '$route.query': function(){\r\n      if(this.$route.query?.folder){\r\n        let fld = this?.test.body.filter((item)=>{return item.id == this.$route.query?.folder && item.type == 'Folder'});\r\n        if(fld.length == 1){\r\n          this.folder = fld[0];\r\n          this.isFolder = true;\r\n        }else{\r\n          this.folder = undefined;\r\n          this.isFolder = false;\r\n        }\r\n      }else{\r\n        this.folder = undefined;\r\n        this.isFolder = false;\r\n      }\r\n      return this.$route.query;\r\n    },\r\n  },\r\n  created() {\r\n    if (this.$route.params.id == \"new\") {\r\n      this.test = {\r\n        test_id: this.$route.params.id,\r\n        usr_id: this.MYID,\r\n        name: \"Новый тест\",\r\n        description: \"\",\r\n        body: [],\r\n      };\r\n    } else {\r\n      let obj = {\r\n        q: \"get_test_editor\",\r\n        me: this.$store.state.ME.data,\r\n        test_id: this.$route.params.id,\r\n      };\r\n      this.axios.post(this.apiurl, obj).then((itm) => {\r\n        console.log(itm.data);\r\n        if (itm.data?.data) {\r\n          this.test = itm.data.data;\r\n        } else if (itm.data?.error) {\r\n          this.error = itm.data.error;\r\n        }\r\n      });\r\n    }\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.test-header-wrapper .content{\r\n  display: grid;\r\n  grid-template-columns: 110px 1fr;\r\n}\r\ntextarea.it-textarea {\r\n  overflow: hidden !important;\r\n}\r\n\r\n\r\n.win-result.p-sidebar {\r\n  height: 100vh !important;\r\n  background-color: rgb(206, 206, 206);\r\n}\r\n.win-result .p-sidebar-header {\r\n  box-shadow: 0px 8px 8px #cecece;\r\n  z-index: 1;\r\n}\r\n.win-result .p-sidebar-header::before{\r\n  content: 'Папка';\r\n  font-size: 22px;\r\n  background-color: white;\r\n  padding: 6px;\r\n  margin-top: -4px;\r\n  border-radius: 6px;\r\n  position: absolute;\r\n  left: 10px;\r\n}\r\n.win-result .sidebar-conent-center {\r\n  max-width: 700px;\r\n  margin: auto;\r\n}\r\n.win-result .p-sidebar-content {\r\n  margin: 0px;\r\n  padding: 0px;\r\n}\r\n</style>\r\n"]}]}