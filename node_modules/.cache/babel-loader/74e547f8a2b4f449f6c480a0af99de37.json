{"remainingRequest":"E:\\vue-projects\\QFTest\\qftest-front\\node_modules\\babel-loader\\lib\\index.js!E:\\vue-projects\\QFTest\\qftest-front\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\vue-projects\\QFTest\\qftest-front\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!E:\\vue-projects\\QFTest\\qftest-front\\src\\components\\Units\\LoginForm.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\vue-projects\\QFTest\\qftest-front\\src\\components\\Units\\LoginForm.vue","mtime":1647388266121},{"path":"E:\\vue-projects\\QFTest\\qftest-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1647388190513},{"path":"E:\\vue-projects\\QFTest\\qftest-front\\node_modules\\babel-loader\\lib\\index.js","mtime":1647388184590},{"path":"E:\\vue-projects\\QFTest\\qftest-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1647388190513},{"path":"E:\\vue-projects\\QFTest\\qftest-front\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1647388262278}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiRTovdnVlLXByb2plY3RzL1FGVGVzdC9xZnRlc3QtZnJvbnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwppbXBvcnQgeyBtYXBBY3Rpb25zIH0gZnJvbSAndnVleCc7CmV4cG9ydCBkZWZhdWx0IHsKICBzZXR1cDogZnVuY3Rpb24gc2V0dXAoKSB7fSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgd2FpdGluZ0xvZ2luOiBmYWxzZSwKICAgICAgbG9naW46ICcnLAogICAgICBwYXNzd29yZDogJycKICAgIH07CiAgfSwKICBtZXRob2RzOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIG1hcEFjdGlvbnMoWyJMT0FEX1VTRVIiXSkpLCB7fSwgewogICAgZW50ZXJWSzogZnVuY3Rpb24gZW50ZXJWSygpIHsKICAgICAgLy/QktGF0L7QtCDRh9C10YDQtdC3INCS0LrQvtC90YLQsNC60YLQtQogICAgICBkb2N1bWVudC5sb2NhdGlvbiA9IHRoaXMuY29uZi5WS19BVVRIX1VSTDsKICAgIH0sCiAgICBlbnRlckRlZjogZnVuY3Rpb24gZW50ZXJEZWYoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAvL9CS0YXQvtC0INGH0LXRgNC10Lcg0YHRgtCw0L3QtNCw0YDRgtC90YvQuSDQsNC60LrQsNGD0L3RggogICAgICB0aGlzLndhaXRpbmdMb2dpbiA9IHRydWU7CiAgICAgIHRoaXMuYXhpb3MucG9zdCh0aGlzLmNvbmYuQVVUSF9VUkwsIHsKICAgICAgICBsb2dpbjogdGhpcy5sb2dpbiwKICAgICAgICBwYXNzd29yZDogdGhpcy5wYXNzd29yZCwKICAgICAgICBzbjogJ2RlZicKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uKSB7CiAgICAgICAgdmFyIF9yZXNwb24kZGF0YTsKCiAgICAgICAgX3RoaXMud2FpdGluZ0xvZ2luID0gZmFsc2U7CgogICAgICAgIGlmICghKChfcmVzcG9uJGRhdGEgPSByZXNwb24uZGF0YSkgIT09IG51bGwgJiYgX3Jlc3BvbiRkYXRhICE9PSB2b2lkIDAgJiYgX3Jlc3BvbiRkYXRhLmVycm9yKSkgewogICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Vzcl9pZCcsIHJlc3Bvbi5kYXRhLnVzcl9pZCk7CiAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnbXlrZXknLCByZXNwb24uZGF0YS5teWtleSk7CgogICAgICAgICAgX3RoaXMuTE9BRF9VU0VSKCk7CgogICAgICAgICAgX3RoaXMuJHJvdXRlci5wdXNoKCcvJyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHZhciBfcmVzcG9uJGRhdGEyOwoKICAgICAgICAgIF90aGlzLiRlcnJvcigi0J7RiNC40LHQutCwINCw0LLRgtC+0YDQuNC30LDRhtC40LgiLCAoKF9yZXNwb24kZGF0YTIgPSByZXNwb24uZGF0YSkgPT09IG51bGwgfHwgX3Jlc3BvbiRkYXRhMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3Jlc3BvbiRkYXRhMi5lcnJvcikgfHwgItCd0LXQuNC30LLQtdGB0YLQvdCw0Y8g0L7RiNC40LHQutCwIik7CiAgICAgICAgfQogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMud2FpdGluZ0xvZ2luID0gZmFsc2U7CgogICAgICAgIF90aGlzLiRlcnJvcigi0J7RiNC40LHQutCwINCw0LLRgtC+0YDQuNC30LDRhtC40LgiLCAi0J/RgNC+0LHQu9C10LzRiyDRgSDRgdC+0LXQtNC40L3QtdC90LjQtdC8Iik7CiAgICAgIH0pOwogICAgfSwKICAgIGdvVG9QYXNzd29yZElucHV0OiBmdW5jdGlvbiBnb1RvUGFzc3dvcmRJbnB1dCgpIHsKICAgICAgdmFyIGlucCA9IHRoaXMuJHJlZnMucGFzc3dvcmQuJGVsLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJpbnB1dCIpOwoKICAgICAgaWYgKGlucCkgewogICAgICAgIGlucFswXS5mb2N1cygpOwogICAgICB9CiAgICB9CiAgfSkKfTs="},{"version":3,"sources":["E:\\vue-projects\\QFTest\\qftest-front\\src\\components\\Units\\LoginForm.vue"],"names":[],"mappings":";AAaA,SAAQ,UAAR,QAAyB,MAAzB;AAEA,eAAe;AACb,EAAA,KADa,mBACL,CAEP,CAHY;AAIb,EAAA,IAJa,kBAIP;AACJ,WAAM;AACJ,MAAA,YAAY,EAAE,KADV;AAEJ,MAAA,KAAK,EAAE,EAFH;AAGJ,MAAA,QAAQ,EAAE;AAHN,KAAN;AAKD,GAVY;AAWb,EAAA,OAAO,kCACF,UAAU,CAAC,CAAC,WAAD,CAAD,CADR;AAEL,IAAA,OAFK,qBAEI;AAAC;AACR,MAAA,QAAQ,CAAC,QAAT,GAAoB,KAAK,IAAL,CAAU,WAA9B;AACD,KAJI;AAKL,IAAA,QALK,sBAKK;AAAA;;AAAC;AACT,WAAK,YAAL,GAAoB,IAApB;AACA,WAAK,KAAL,CAAW,IAAX,CAAgB,KAAK,IAAL,CAAU,QAA1B,EAAoC;AAClC,QAAA,KAAK,EAAE,KAAK,KADsB;AAElC,QAAA,QAAQ,EAAE,KAAK,QAFmB;AAGlC,QAAA,EAAE,EAAE;AAH8B,OAApC,EAIG,IAJH,CAIQ,UAAA,MAAK,EAAK;AAAA;;AAChB,QAAA,KAAI,CAAC,YAAL,GAAoB,KAApB;;AACA,YAAG,kBAAC,MAAM,CAAC,IAAR,yCAAC,aAAa,KAAd,CAAH,EAAuB;AACjB,UAAA,YAAY,CAAC,OAAb,CAAqB,QAArB,EAA+B,MAAM,CAAC,IAAP,CAAY,MAA3C;AACA,UAAA,YAAY,CAAC,OAAb,CAAqB,OAArB,EAA8B,MAAM,CAAC,IAAP,CAAY,KAA1C;;AAEA,UAAA,KAAI,CAAC,SAAL;;AACA,UAAA,KAAI,CAAC,OAAL,CAAa,IAAb,CAAkB,GAAlB;AACL,SAND,MAMK;AAAA;;AACH,UAAA,KAAI,CAAC,MAAL,CAAY,oBAAZ,EAAkC,kBAAA,MAAM,CAAC,IAAP,gEAAa,KAAb,KAAsB,oBAAxD;AACF;AACD,OAfD,EAeG,KAfH,CAeS,YAAI;AACX,QAAA,KAAI,CAAC,YAAL,GAAoB,KAApB;;AACA,QAAA,KAAI,CAAC,MAAL,CAAY,oBAAZ,EAAkC,wBAAlC;AACC,OAlBH;AAmBD,KA1BI;AA2BL,IAAA,iBA3BK,+BA2Bc;AACjB,UAAI,GAAE,GAAI,KAAK,KAAL,CAAW,QAAX,CAAoB,GAApB,CAAwB,oBAAxB,CAA6C,OAA7C,CAAV;;AACA,UAAG,GAAH,EAAO;AACL,QAAA,GAAG,CAAC,CAAD,CAAH,CAAO,KAAP;AACF;AACF;AAhCK;AAXM,CAAf","sourcesContent":["<template>\r\n  <div class=\"login-form\">\r\n    <br>\r\n    <div>Необходимо выполнить вход</div><br>\r\n    <it-input prefix=\"Логин\" v-model=\"login\" @keyup.enter=\"goToPasswordInput\"/>\r\n    <it-input prefix=\"Пароль\" ref=\"password\" type=\"password\" v-model=\"password\" @keyup.enter=\"enterDef\" />\r\n    <it-button block :type=\"'primary'\" style='height: 41px;' @click=\"enterDef\" outlined>Войти</it-button>\r\n    <it-divider/>\r\n    <it-button block :type=\"'primary'\" class='h-enter-vk' @click=\"enterVK\">Войти через Вконтакте</it-button>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {mapActions} from 'vuex'\r\n\r\nexport default {\r\n  setup() {\r\n    \r\n  },\r\n  data(){\r\n    return{\r\n      waitingLogin: false,\r\n      login: '',\r\n      password: '',\r\n    }\r\n  },\r\n  methods:{\r\n    ...mapActions([\"LOAD_USER\"]),\r\n    enterVK(){//Вход через Вконтакте\r\n      document.location = this.conf.VK_AUTH_URL;\r\n    },\r\n    enterDef(){//Вход через стандартный аккаунт\r\n      this.waitingLogin = true;\r\n      this.axios.post(this.conf.AUTH_URL, {\r\n        login: this.login,\r\n        password: this.password,\r\n        sn: 'def'\r\n      }).then(respon => {\r\n        this.waitingLogin = false;\r\n        if(!respon.data?.error){\r\n              localStorage.setItem('usr_id', respon.data.usr_id);\r\n              localStorage.setItem('mykey', respon.data.mykey);\r\n\r\n              this.LOAD_USER();\r\n              this.$router.push('/');\r\n        }else{\r\n          this.$error(\"Ошибка авторизации\", respon.data?.error || \"Неизвестная ошибка\");\r\n        }\r\n      }).catch(()=>{ \r\n        this.waitingLogin = false;\r\n        this.$error(\"Ошибка авторизации\", \"Проблемы с соединением\");\r\n        });\r\n    },\r\n    goToPasswordInput(){\r\n      let inp = this.$refs.password.$el.getElementsByTagName(\"input\");\r\n      if(inp){\r\n        inp[0].focus();\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n.login-form .it-input-prefix-wrapper{\r\n  margin-bottom: 6px !important;\r\n}\r\n.h-enter-vk{\r\n  display: block;\r\n  height: 41px;\r\n}\r\n</style>"],"sourceRoot":""}]}