{"remainingRequest":"D:\\vue-projects\\rutest\\node_modules\\thread-loader\\dist\\cjs.js!D:\\vue-projects\\rutest\\node_modules\\babel-loader\\lib\\index.js!D:\\vue-projects\\rutest\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\vue-projects\\rutest\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!D:\\vue-projects\\rutest\\src\\components\\Menus\\ShareTest.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\vue-projects\\rutest\\src\\components\\Menus\\ShareTest.vue","mtime":1624398907980},{"path":"D:\\vue-projects\\rutest\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue-projects\\rutest\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue-projects\\rutest\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\vue-projects\\rutest\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue-projects\\rutest\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1616796459000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IFNlbGVjdEdyb3VwcyBmcm9tICIuL1NlbGVjdEdyb3Vwcy52dWUiOwppbXBvcnQgVGVzdFB1Ymxpc2hpbmdTZXR0aW5ncyBmcm9tICIuL1Rlc3RQdWJsaXNoaW5nU2V0dGluZ3MudnVlIjsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIFNlbGVjdEdyb3VwczogU2VsZWN0R3JvdXBzLAogICAgVGVzdFB1Ymxpc2hpbmdTZXR0aW5nczogVGVzdFB1Ymxpc2hpbmdTZXR0aW5ncwogIH0sCiAgcHJvcHM6IFsiZGF0YSJdLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjdXJUYWI6ICfQk9GA0YPQv9C/0YsnLAogICAgICBjb21tZW50OiAnJywKICAgICAgc2hhcmluZ1Rlc3Q6IGZhbHNlLAogICAgICBjYXNoR3JvdXBzOiB1bmRlZmluZWQsCiAgICAgIGNhc2hTZXR0aW5nczogdW5kZWZpbmVkLAogICAgICBpc0J0blNoYXJlOiBmYWxzZSwKICAgICAgc2VsZWN0ZWRHcm91cHM6IFtdCiAgICB9OwogIH0sCiAgd2F0Y2g6IHsKICAgIHNlbGVjdGVkR3JvdXBzOiBmdW5jdGlvbiBzZWxlY3RlZEdyb3VwcygpIHsKICAgICAgdGhpcy5pc0J0blNoYXJlID0gdGhpcy5zZWxlY3RlZEdyb3Vwcy5sZW5ndGggPiAwOwogICAgfQogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIGNvbnNvbGUubG9nKHRoaXMuZGF0YSk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBvblNlbGVjdGVkSXRlbXM6IGZ1bmN0aW9uIG9uU2VsZWN0ZWRJdGVtcyhhcnIpIHsKICAgICAgdGhpcy5zZWxlY3RlZEdyb3VwcyA9IGFycjsKICAgIH0sCiAgICB0b0Nhc2hTZXR0aW5nczogZnVuY3Rpb24gdG9DYXNoU2V0dGluZ3MoZGF0YSkgewogICAgICB0aGlzLmNhc2hTZXR0aW5ncyA9IGRhdGE7CiAgICB9LAogICAgdG9DYXNoR3JvdXBzOiBmdW5jdGlvbiB0b0Nhc2hHcm91cHMoZGF0YSkgewogICAgICB0aGlzLmNhc2hHcm91cHMgPSBkYXRhOwogICAgfSwKICAgIHNoYXJlVGVzdHM6IGZ1bmN0aW9uIHNoYXJlVGVzdHMoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBpZiAodGhpcy5zZWxlY3RlZEdyb3Vwcy5sZW5ndGggPT0gMCB8fCB0aGlzLnNoYXJpbmdUZXN0KSByZXR1cm4gZmFsc2U7CiAgICAgIHRoaXMuc2hhcmluZ1Rlc3QgPSB0cnVlOwogICAgICB2YXIgb2JqID0gewogICAgICAgIHE6ICdzaGFyZV90ZXN0cycsCiAgICAgICAgbWU6IHRoaXMuJHN0b3JlLnN0YXRlLk1FLmRhdGEsCiAgICAgICAgZ3JvdXBzOiB0aGlzLnNlbGVjdGVkR3JvdXBzLAogICAgICAgIHRlc3RfaWQ6IHRoaXMuZGF0YS50ZXN0X2lkLAogICAgICAgIHNldHRpbmdzOiB0aGlzLmNhc2hTZXR0aW5ncywKICAgICAgICBjb21tZW50OiB0aGlzLmNvbW1lbnQKICAgICAgfTsKICAgICAgY29uc29sZS5sb2cob2JqKTsKICAgICAgdGhpcy5heGlvcy5wb3N0KHdpbmRvdy5jLkFQSSwgb2JqKS50aGVuKGZ1bmN0aW9uIChpdG0pIHsKICAgICAgICB2YXIgX2l0bSRkYXRhOwoKICAgICAgICBfdGhpcy5zaGFyaW5nVGVzdCA9IGZhbHNlOwoKICAgICAgICBpZiAoKF9pdG0kZGF0YSA9IGl0bS5kYXRhKSAhPT0gbnVsbCAmJiBfaXRtJGRhdGEgIT09IHZvaWQgMCAmJiBfaXRtJGRhdGEuZGF0YSkgewogICAgICAgICAgX3RoaXMuJE5vdGlmaWNhdGlvbi5zdWNjZXNzKHsKICAgICAgICAgICAgdGl0bGU6ICfQotC10YHRgiDQvtC/0YPQsdC70LjQutC+0LLQsNC9JywKICAgICAgICAgICAgcGxhY2VtZW50OiAnYm90dG9tLXJpZ2h0JywKICAgICAgICAgICAgdGV4dDogItCS0Ysg0YPRgdC/0LXRiNC90L4g0L7Qv9GD0LHQu9C40LrQvtCy0LDQu9C4INGC0LXRgdGCINCyINCy0YvQsdGA0LDQvdC90YvRhSDQs9GA0YPQv9C/0LDRhSIKICAgICAgICAgIH0pOwoKICAgICAgICAgIF90aGlzLiRlbWl0KCdvbi1jbG9zZScpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["D:\\vue-projects\\rutest\\src\\components\\Menus\\ShareTest.vue"],"names":[],"mappings":"AA0BA,OAAO,YAAP,MAAyB,oBAAzB;AACA,OAAO,sBAAP,MAAmC,8BAAnC;AAEA,eAAe;AACb,EAAA,UAAU,EAAE;AACV,IAAA,YAAY,EAAZ,YADU;AAEV,IAAA,sBAAsB,EAAtB;AAFU,GADC;AAKb,EAAA,KAAK,EAAE,CAAC,MAAD,CALM;AAMb,EAAA,IANa,kBAMN;AACL,WAAO;AACL,MAAA,MAAM,EAAE,QADH;AAEL,MAAA,OAAO,EAAE,EAFJ;AAGL,MAAA,WAAW,EAAE,KAHR;AAIL,MAAA,UAAU,EAAE,SAJP;AAKL,MAAA,YAAY,EAAE,SALT;AAML,MAAA,UAAU,EAAE,KANP;AAOL,MAAA,cAAc,EAAE;AAPX,KAAP;AASD,GAhBY;AAiBb,EAAA,KAAK,EAAC;AACJ,IAAA,cADI,4BACY;AACd,WAAK,UAAL,GAAkB,KAAK,cAAL,CAAoB,MAApB,GAA6B,CAA/C;AACF;AAHI,GAjBO;AAsBb,EAAA,OAtBa,qBAsBJ;AACP,IAAA,OAAO,CAAC,GAAR,CAAY,KAAK,IAAjB;AACD,GAxBY;AAyBb,EAAA,OAAO,EAAC;AACN,IAAA,eADM,2BACU,GADV,EACc;AAClB,WAAK,cAAL,GAAsB,GAAtB;AACD,KAHK;AAIN,IAAA,cAJM,0BAIS,IAJT,EAIc;AAClB,WAAK,YAAL,GAAoB,IAApB;AACD,KANK;AAON,IAAA,YAPM,wBAOO,IAPP,EAOY;AAChB,WAAK,UAAL,GAAkB,IAAlB;AACD,KATK;AAUN,IAAA,UAVM,wBAUM;AAAA;;AACV,UAAG,KAAK,cAAL,CAAoB,MAApB,IAA8B,CAA9B,IAAmC,KAAK,WAA3C,EAAwD,OAAO,KAAP;AACxD,WAAK,WAAL,GAAmB,IAAnB;AACA,UAAI,GAAE,GAAI;AACR,QAAA,CAAC,EAAE,aADK;AAER,QAAA,EAAE,EAAE,KAAK,MAAL,CAAY,KAAZ,CAAkB,EAAlB,CAAqB,IAFjB;AAGR,QAAA,MAAM,EAAE,KAAK,cAHL;AAIR,QAAA,OAAO,EAAE,KAAK,IAAL,CAAU,OAJX;AAKR,QAAA,QAAQ,EAAE,KAAK,YALP;AAMR,QAAA,OAAO,EAAE,KAAK;AANN,OAAV;AAQA,MAAA,OAAO,CAAC,GAAR,CAAY,GAAZ;AACA,WAAK,KAAL,CAAW,IAAX,CAAgB,MAAM,CAAC,CAAP,CAAS,GAAzB,EAA8B,GAA9B,EAAmC,IAAnC,CAAwC,UAAA,GAAG,EAAE;AAAA;;AAC3C,QAAA,KAAI,CAAC,WAAL,GAAmB,KAAnB;;AACA,yBAAG,GAAG,CAAC,IAAP,sCAAG,UAAU,IAAb,EAAkB;AAChB,UAAA,KAAI,CAAC,aAAL,CAAmB,OAAnB,CAA2B;AACzB,YAAA,KAAK,EAAE,kBADkB;AAEzB,YAAA,SAAS,EAAE,cAFc;AAGzB,YAAA,IAAI,EAAE;AAHmB,WAA3B;;AAKA,UAAA,KAAI,CAAC,KAAL,CAAW,UAAX;AACF;AACD,OAVD;AAWF;AAjCM;AAzBK,CAAf","sourcesContent":["<template>\r\n  <div v-if=\"data\">\r\n    <div>\r\n      <div class=\"itm-test-main-info\">\r\n        <it-avatar square size=\"45px\" :text=\"data.name\" />\r\n        <h3 class=\"card-test-title\">\r\n          <span>{{ data.name }}</span>\r\n        </h3>\r\n        <span v-if=\"data?.description?.length\" class=\"card-description\">\r\n          <pre>{{ data.description }}</pre>\r\n        </span>\r\n      </div>\r\n    </div>\r\n    <it-textarea class=\"it-share-test-comment\" v-model=\"comment\" :resize-on-write=\"true\" :rows=\"1\" placeholder=\"Комментарий\"/>\r\n    <it-toggle\r\n      v-model=\"curTab\"\r\n      :options=\"['Группы', 'Параметры']\"\r\n    /><br>\r\n    <SelectGroups v-if=\"curTab=='Группы'\" :data=\"cashGroups\" class=\"enter-show\" @change=\"onSelectedItems\" @cash=\"toCashGroups\" />\r\n    <TestPublishingSettings v-if=\"curTab=='Параметры'\" :data=\"cashSettings\" class=\"enter-show\" @cash=\"toCashSettings\" />\r\n    <br>\r\n    <it-button @click=\"shareTests\" :loading=\"sharingTest\" size=\"big\" block :disabled=\"!isBtnShare\">Отправить</it-button>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport SelectGroups from \"./SelectGroups.vue\";\r\nimport TestPublishingSettings from \"./TestPublishingSettings.vue\";\r\n\r\nexport default {\r\n  components: {\r\n    SelectGroups,\r\n    TestPublishingSettings,\r\n  },\r\n  props: [\"data\"],\r\n  data() {\r\n    return {\r\n      curTab: 'Группы',\r\n      comment: '',\r\n      sharingTest: false,\r\n      cashGroups: undefined,\r\n      cashSettings: undefined, \r\n      isBtnShare: false,\r\n      selectedGroups: [],\r\n    };\r\n  },\r\n  watch:{\r\n    selectedGroups(){\r\n      this.isBtnShare = this.selectedGroups.length > 0;\r\n    }\r\n  },\r\n  mounted(){\r\n    console.log(this.data);\r\n  },\r\n  methods:{\r\n    onSelectedItems(arr){\r\n      this.selectedGroups = arr;\r\n    },\r\n    toCashSettings(data){\r\n      this.cashSettings = data;\r\n    },\r\n    toCashGroups(data){\r\n      this.cashGroups = data;\r\n    },\r\n    shareTests(){\r\n      if(this.selectedGroups.length == 0 || this.sharingTest) return false;\r\n      this.sharingTest = true;\r\n      let obj = {\r\n        q: 'share_tests',\r\n        me: this.$store.state.ME.data,\r\n        groups: this.selectedGroups,\r\n        test_id: this.data.test_id,\r\n        settings: this.cashSettings,\r\n        comment: this.comment,\r\n      }\r\n      console.log(obj);\r\n      this.axios.post(window.c.API, obj).then(itm=>{\r\n        this.sharingTest = false;\r\n        if(itm.data?.data){\r\n          this.$Notification.success({\r\n            title: 'Тест опубликован',\r\n            placement: 'bottom-right',\r\n            text: \"Вы успешно опубликовали тест в выбранных группах\",\r\n          });\r\n          this.$emit('on-close');\r\n        }\r\n      });\r\n    }\r\n\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.it-share-test-comment{\r\n  margin: 8px 0px;\r\n}\r\n.it-avatar {\r\n  float: left;\r\n  margin-right: 6px;\r\n}\r\n.itm-test-main-info {\r\n  min-height: 45px;\r\n}\r\n\r\npre {\r\n  margin: 0px;\r\n}\r\nh3 {\r\n  margin: 0px;\r\n}\r\n.card-description {\r\n  max-height: 300px;\r\n  overflow-y: auto;\r\n}\r\n</style>\r\n"],"sourceRoot":""}]}