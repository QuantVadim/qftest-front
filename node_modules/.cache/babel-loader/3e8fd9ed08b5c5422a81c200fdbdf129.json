{"remainingRequest":"E:\\vue-projects\\rutest\\node_modules\\babel-loader\\lib\\index.js!E:\\vue-projects\\rutest\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\vue-projects\\rutest\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!E:\\vue-projects\\rutest\\src\\components\\Units\\LoginForm.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\vue-projects\\rutest\\src\\components\\Units\\LoginForm.vue","mtime":1641491806966},{"path":"E:\\vue-projects\\rutest\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\vue-projects\\rutest\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\vue-projects\\rutest\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\vue-projects\\rutest\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1616796459000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiRTovdnVlLXByb2plY3RzL3J1dGVzdC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCB7IG1hcEFjdGlvbnMgfSBmcm9tICd2dWV4JzsKZXhwb3J0IGRlZmF1bHQgewogIHNldHVwOiBmdW5jdGlvbiBzZXR1cCgpIHt9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB3YWl0aW5nTG9naW46IGZhbHNlLAogICAgICBsb2dpbjogJycsCiAgICAgIHBhc3N3b3JkOiAnJwogICAgfTsKICB9LAogIG1ldGhvZHM6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgbWFwQWN0aW9ucyhbIkxPQURfVVNFUiJdKSksIHt9LCB7CiAgICBlbnRlclZLOiBmdW5jdGlvbiBlbnRlclZLKCkgewogICAgICAvL9CS0YXQvtC0INGH0LXRgNC10Lcg0JLQutC+0L3RgtCw0LrRgtC1CiAgICAgIGRvY3VtZW50LmxvY2F0aW9uID0gdGhpcy5jb25mLlZLX0FVVEhfVVJMOwogICAgfSwKICAgIGVudGVyRGVmOiBmdW5jdGlvbiBlbnRlckRlZigpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIC8v0JLRhdC+0LQg0YfQtdGA0LXQtyDRgdGC0LDQvdC00LDRgNGC0L3Ri9C5INCw0LrQutCw0YPQvdGCCiAgICAgIHRoaXMud2FpdGluZ0xvZ2luID0gdHJ1ZTsKICAgICAgdGhpcy5heGlvcy5wb3N0KHRoaXMuY29uZi5BVVRIX1VSTCwgewogICAgICAgIGxvZ2luOiB0aGlzLmxvZ2luLAogICAgICAgIHBhc3N3b3JkOiB0aGlzLnBhc3N3b3JkLAogICAgICAgIHNuOiAnZGVmJwogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb24pIHsKICAgICAgICB2YXIgX3Jlc3BvbiRkYXRhOwoKICAgICAgICBfdGhpcy53YWl0aW5nTG9naW4gPSBmYWxzZTsKCiAgICAgICAgaWYgKCEoKF9yZXNwb24kZGF0YSA9IHJlc3Bvbi5kYXRhKSAhPT0gbnVsbCAmJiBfcmVzcG9uJGRhdGEgIT09IHZvaWQgMCAmJiBfcmVzcG9uJGRhdGEuZXJyb3IpKSB7CiAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndXNyX2lkJywgcmVzcG9uLmRhdGEudXNyX2lkKTsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdteWtleScsIHJlc3Bvbi5kYXRhLm15a2V5KTsKCiAgICAgICAgICBfdGhpcy5MT0FEX1VTRVIoKTsKCiAgICAgICAgICBfdGhpcy4kcm91dGVyLnB1c2goJy8nKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdmFyIF9yZXNwb24kZGF0YTI7CgogICAgICAgICAgX3RoaXMuJGVycm9yKCLQntGI0LjQsdC60LAg0LDQstGC0L7RgNC40LfQsNGG0LjQuCIsICgoX3Jlc3BvbiRkYXRhMiA9IHJlc3Bvbi5kYXRhKSA9PT0gbnVsbCB8fCBfcmVzcG9uJGRhdGEyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcmVzcG9uJGRhdGEyLmVycm9yKSB8fCAi0J3QtdC40LfQstC10YHRgtC90LDRjyDQvtGI0LjQsdC60LAiKTsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpcy53YWl0aW5nTG9naW4gPSBmYWxzZTsKCiAgICAgICAgX3RoaXMuJGVycm9yKCLQntGI0LjQsdC60LAg0LDQstGC0L7RgNC40LfQsNGG0LjQuCIsICLQn9GA0L7QsdC70LXQvNGLINGBINGB0L7QtdC00LjQvdC10L3QuNC10LwiKTsKICAgICAgfSk7CiAgICB9LAogICAgZ29Ub1Bhc3N3b3JkSW5wdXQ6IGZ1bmN0aW9uIGdvVG9QYXNzd29yZElucHV0KCkgewogICAgICB2YXIgaW5wID0gdGhpcy4kcmVmcy5wYXNzd29yZC4kZWwuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImlucHV0Iik7CgogICAgICBpZiAoaW5wKSB7CiAgICAgICAgaW5wWzBdLmZvY3VzKCk7CiAgICAgIH0KICAgIH0KICB9KQp9Ow=="},{"version":3,"sources":["E:\\vue-projects\\rutest\\src\\components\\Units\\LoginForm.vue"],"names":[],"mappings":";AAaA,SAAQ,UAAR,QAAyB,MAAzB;AAEA,eAAe;AACb,EAAA,KADa,mBACL,CAEP,CAHY;AAIb,EAAA,IAJa,kBAIP;AACJ,WAAM;AACJ,MAAA,YAAY,EAAE,KADV;AAEJ,MAAA,KAAK,EAAE,EAFH;AAGJ,MAAA,QAAQ,EAAE;AAHN,KAAN;AAKD,GAVY;AAWb,EAAA,OAAO,kCACF,UAAU,CAAC,CAAC,WAAD,CAAD,CADR;AAEL,IAAA,OAFK,qBAEI;AAAC;AACR,MAAA,QAAQ,CAAC,QAAT,GAAoB,KAAK,IAAL,CAAU,WAA9B;AACD,KAJI;AAKL,IAAA,QALK,sBAKK;AAAA;;AAAC;AACT,WAAK,YAAL,GAAoB,IAApB;AACA,WAAK,KAAL,CAAW,IAAX,CAAgB,KAAK,IAAL,CAAU,QAA1B,EAAoC;AAClC,QAAA,KAAK,EAAE,KAAK,KADsB;AAElC,QAAA,QAAQ,EAAE,KAAK,QAFmB;AAGlC,QAAA,EAAE,EAAE;AAH8B,OAApC,EAIG,IAJH,CAIQ,UAAA,MAAK,EAAK;AAAA;;AAChB,QAAA,KAAI,CAAC,YAAL,GAAoB,KAApB;;AACA,YAAG,kBAAC,MAAM,CAAC,IAAR,yCAAC,aAAa,KAAd,CAAH,EAAuB;AACjB,UAAA,YAAY,CAAC,OAAb,CAAqB,QAArB,EAA+B,MAAM,CAAC,IAAP,CAAY,MAA3C;AACA,UAAA,YAAY,CAAC,OAAb,CAAqB,OAArB,EAA8B,MAAM,CAAC,IAAP,CAAY,KAA1C;;AAEA,UAAA,KAAI,CAAC,SAAL;;AACA,UAAA,KAAI,CAAC,OAAL,CAAa,IAAb,CAAkB,GAAlB;AACL,SAND,MAMK;AAAA;;AACH,UAAA,KAAI,CAAC,MAAL,CAAY,oBAAZ,EAAkC,kBAAA,MAAM,CAAC,IAAP,gEAAa,KAAb,KAAsB,oBAAxD;AACF;AACD,OAfD,EAeG,KAfH,CAeS,YAAI;AACX,QAAA,KAAI,CAAC,YAAL,GAAoB,KAApB;;AACA,QAAA,KAAI,CAAC,MAAL,CAAY,oBAAZ,EAAkC,wBAAlC;AACC,OAlBH;AAmBD,KA1BI;AA2BL,IAAA,iBA3BK,+BA2Bc;AACjB,UAAI,GAAE,GAAI,KAAK,KAAL,CAAW,QAAX,CAAoB,GAApB,CAAwB,oBAAxB,CAA6C,OAA7C,CAAV;;AACA,UAAG,GAAH,EAAO;AACL,QAAA,GAAG,CAAC,CAAD,CAAH,CAAO,KAAP;AACF;AACF;AAhCK;AAXM,CAAf","sourcesContent":["<template>\r\n  <div class=\"login-form\">\r\n    <br>\r\n    <div>Необходимо выполнить вход</div><br>\r\n    <it-input prefix=\"Логин\" v-model=\"login\" @keyup.enter=\"goToPasswordInput\"/>\r\n    <it-input prefix=\"Пароль\" ref=\"password\" type=\"password\" v-model=\"password\" @keyup.enter=\"enterDef\" />\r\n    <it-button block :type=\"'primary'\" style='height: 41px;' @click=\"enterDef\" outlined>Войти</it-button>\r\n    <it-divider/>\r\n    <it-button block :type=\"'primary'\" class='h-enter-vk' @click=\"enterVK\">Войти через Вконтакте</it-button>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {mapActions} from 'vuex'\r\n\r\nexport default {\r\n  setup() {\r\n    \r\n  },\r\n  data(){\r\n    return{\r\n      waitingLogin: false,\r\n      login: '',\r\n      password: '',\r\n    }\r\n  },\r\n  methods:{\r\n    ...mapActions([\"LOAD_USER\"]),\r\n    enterVK(){//Вход через Вконтакте\r\n      document.location = this.conf.VK_AUTH_URL;\r\n    },\r\n    enterDef(){//Вход через стандартный аккаунт\r\n      this.waitingLogin = true;\r\n      this.axios.post(this.conf.AUTH_URL, {\r\n        login: this.login,\r\n        password: this.password,\r\n        sn: 'def'\r\n      }).then(respon => {\r\n        this.waitingLogin = false;\r\n        if(!respon.data?.error){\r\n              localStorage.setItem('usr_id', respon.data.usr_id);\r\n              localStorage.setItem('mykey', respon.data.mykey);\r\n\r\n              this.LOAD_USER();\r\n              this.$router.push('/');\r\n        }else{\r\n          this.$error(\"Ошибка авторизации\", respon.data?.error || \"Неизвестная ошибка\");\r\n        }\r\n      }).catch(()=>{ \r\n        this.waitingLogin = false;\r\n        this.$error(\"Ошибка авторизации\", \"Проблемы с соединением\");\r\n        });\r\n    },\r\n    goToPasswordInput(){\r\n      let inp = this.$refs.password.$el.getElementsByTagName(\"input\");\r\n      if(inp){\r\n        inp[0].focus();\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n.login-form .it-input-prefix-wrapper{\r\n  margin-bottom: 6px !important;\r\n}\r\n.h-enter-vk{\r\n  display: block;\r\n  height: 41px;\r\n}\r\n</style>"],"sourceRoot":""}]}