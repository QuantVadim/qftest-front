{"remainingRequest":"D:\\vue-projects\\rutest\\node_modules\\thread-loader\\dist\\cjs.js!D:\\vue-projects\\rutest\\node_modules\\babel-loader\\lib\\index.js!D:\\vue-projects\\rutest\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\vue-projects\\rutest\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!D:\\vue-projects\\rutest\\src\\components\\Items\\GroupUser.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\vue-projects\\rutest\\src\\components\\Items\\GroupUser.vue","mtime":1624576096273},{"path":"D:\\vue-projects\\rutest\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue-projects\\rutest\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue-projects\\rutest\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\vue-projects\\rutest\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue-projects\\rutest\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1616796459000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCBTcGxpdEJ1dHRvbiBmcm9tICJwcmltZXZ1ZS9zcGxpdGJ1dHRvbiI7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBTcGxpdEJ1dHRvbjogU3BsaXRCdXR0b24KICB9LAogIHByb3BzOiBbImRhdGEiLCAiaW5kZXgiXSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICByZXR1cm4gewogICAgICBpc1dhaXRpbmdBY3Rpb246IGZhbHNlLAogICAgICBSZXFBY3Rpb25zOiBbewogICAgICAgIGxhYmVsOiAi0JjQt9C80LXQvdC40YLRjCIsCiAgICAgICAgaWNvbjogInBpIHBpLXBlbmNpbCIsCiAgICAgICAgY29tbWFuZDogZnVuY3Rpb24gY29tbWFuZCgpIHsKICAgICAgICAgIGlmIChfdGhpcy5pc1dhaXRpbmdBY3Rpb24pIHJldHVybjsKCiAgICAgICAgICBfdGhpcy4kZW1pdCgnZWRpdCcsIF90aGlzLmluZGV4KTsKICAgICAgICB9CiAgICAgIH0sIHsKICAgICAgICBsYWJlbDogItCj0LTQsNC70LjRgtGMIiwKICAgICAgICBpY29uOiAicGkgcGktdGltZXMiLAogICAgICAgIGNvbW1hbmQ6IGZ1bmN0aW9uIGNvbW1hbmQoKSB7CiAgICAgICAgICBpZiAoX3RoaXMuaXNXYWl0aW5nQWN0aW9uKSByZXR1cm47CgogICAgICAgICAgX3RoaXMuJGVtaXQoJ2RlbGV0ZScsIF90aGlzLmluZGV4KTsKICAgICAgICB9CiAgICAgIH1dCiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHt9LAogIGNvbXB1dGVkOiB7CiAgICB1c2VyTmFtZTogZnVuY3Rpb24gdXNlck5hbWUoKSB7CiAgICAgIHZhciBfdGhpcyRkYXRhOwoKICAgICAgcmV0dXJuIChfdGhpcyRkYXRhID0gdGhpcy5kYXRhKSAhPT0gbnVsbCAmJiBfdGhpcyRkYXRhICE9PSB2b2lkIDAgJiYgX3RoaXMkZGF0YS5uYW1lID8gdGhpcy5kYXRhLm5hbWUgOiB0aGlzLmRhdGEuZmlyc3RfbmFtZSArIHRoaXMuZGF0YS5sYXN0X25hbWU7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBhY2NlcHRVc2VyOiBmdW5jdGlvbiBhY2NlcHRVc2VyKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIGlmICh0aGlzLmlzV2FpdGluZ0FjdGlvbikgcmV0dXJuOwogICAgICB0aGlzLmlzV2FpdGluZ0FjdGlvbiA9IHRydWU7CiAgICAgIHZhciBvYmogPSB7CiAgICAgICAgcTogJ2pvaW5fcmVxdWVzdF9hY3Rpb24nLAogICAgICAgIG1lOiB0aGlzLiRzdG9yZS5zdGF0ZS5NRS5kYXRhLAogICAgICAgIGFjdGlvbjogJ3NldF9hY2NlcHRlZCcsCiAgICAgICAgYWNjZXB0ZWQ6IHRoaXMuZGF0YS5hY2NlcHRlZCA9PSBmYWxzZSwKICAgICAgICByZXFfaWQ6IHRoaXMuZGF0YS5yZXFfaWQKICAgICAgfTsKICAgICAgY29uc29sZS5sb2cob2JqKTsKICAgICAgdGhpcy5heGlvcy5wb3N0KHdpbmRvdy5jLkFQSSwgb2JqKS50aGVuKGZ1bmN0aW9uIChpdG0pIHsKICAgICAgICB2YXIgX2l0bSRkYXRhOwoKICAgICAgICBjb25zb2xlLmxvZyhpdG0uZGF0YSk7CgogICAgICAgIGlmICgoX2l0bSRkYXRhID0gaXRtLmRhdGEpICE9PSBudWxsICYmIF9pdG0kZGF0YSAhPT0gdm9pZCAwICYmIF9pdG0kZGF0YS5kYXRhKSB7CiAgICAgICAgICBfdGhpczIuJGVtaXQoJ3VwZGF0ZV9pdGVtJywgaXRtLmRhdGEuZGF0YSwgX3RoaXMyID09PSBudWxsIHx8IF90aGlzMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMyLmluZGV4KTsKCiAgICAgICAgICBfdGhpczIuaXNXYWl0aW5nQWN0aW9uID0gZmFsc2U7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["D:\\vue-projects\\rutest\\src\\components\\Items\\GroupUser.vue"],"names":[],"mappings":";AAqBA,OAAO,WAAP,MAAwB,sBAAxB;AACA,eAAe;AACb,EAAA,UAAU,EAAE;AACV,IAAA,WAAW,EAAX;AADU,GADC;AAIb,EAAA,KAAK,EAAE,CAAC,MAAD,EAAS,OAAT,CAJM;AAKb,EAAA,IALa,kBAKN;AAAA;;AACL,WAAO;AACL,MAAA,eAAe,EAAE,KADZ;AAEL,MAAA,UAAU,EAAE,CACV;AACE,QAAA,KAAK,EAAE,UADT;AAEE,QAAA,IAAI,EAAE,cAFR;AAGE,QAAA,OAAO,EAAE,mBAAM;AACb,cAAG,KAAI,CAAC,eAAR,EAAyB;;AACzB,UAAA,KAAI,CAAC,KAAL,CAAW,MAAX,EAAmB,KAAI,CAAC,KAAxB;AACD;AANH,OADU,EASV;AACE,QAAA,KAAK,EAAE,SADT;AAEE,QAAA,IAAI,EAAE,aAFR;AAGE,QAAA,OAAO,EAAE,mBAAM;AACb,cAAG,KAAI,CAAC,eAAR,EAAyB;;AACzB,UAAA,KAAI,CAAC,KAAL,CAAW,QAAX,EAAqB,KAAI,CAAC,KAA1B;AACD;AANH,OATU;AAFP,KAAP;AAsBD,GA5BY;AA6Bb,EAAA,OA7Ba,qBA6BJ,CAAE,CA7BE;AA8Bb,EAAA,QAAQ,EAAE;AACR,IAAA,QADQ,sBACG;AAAA;;AACT,aAAO,mBAAK,IAAL,kDAAW,IAAX,GACH,KAAK,IAAL,CAAU,IADP,GAEH,KAAK,IAAL,CAAU,UAAV,GAAuB,KAAK,IAAL,CAAU,SAFrC;AAGD;AALO,GA9BG;AAqCb,EAAA,OAAO,EAAC;AACN,IAAA,UADM,wBACM;AAAA;;AACV,UAAG,KAAK,eAAR,EAAyB;AACzB,WAAK,eAAL,GAAuB,IAAvB;AACA,UAAI,GAAE,GAAI;AACR,QAAA,CAAC,EAAE,qBADK;AAER,QAAA,EAAE,EAAE,KAAK,MAAL,CAAY,KAAZ,CAAkB,EAAlB,CAAqB,IAFjB;AAGR,QAAA,MAAM,EAAE,cAHA;AAIR,QAAA,QAAQ,EAAE,KAAK,IAAL,CAAU,QAAV,IAAsB,KAJxB;AAKR,QAAA,MAAM,EAAE,KAAK,IAAL,CAAU;AALV,OAAV;AAOA,MAAA,OAAO,CAAC,GAAR,CAAY,GAAZ;AACA,WAAK,KAAL,CAAW,IAAX,CAAgB,MAAM,CAAC,CAAP,CAAS,GAAzB,EAA8B,GAA9B,EAAmC,IAAnC,CAAwC,UAAA,GAAG,EAAE;AAAA;;AAC3C,QAAA,OAAO,CAAC,GAAR,CAAY,GAAG,CAAC,IAAhB;;AACA,yBAAG,GAAG,CAAC,IAAP,sCAAG,UAAU,IAAb,EAAkB;AAChB,UAAA,MAAI,CAAC,KAAL,CAAW,aAAX,EAA0B,GAAG,CAAC,IAAJ,CAAS,IAAnC,EAAyC,MAAzC,aAAyC,MAAzC,uBAAyC,MAAI,CAAE,KAA/C;;AACA,UAAA,MAAI,CAAC,eAAL,GAAuB,KAAvB;AACF;AACD,OAND;AAOF;AAnBM;AArCK,CAAf","sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"user-item-name-row\">\r\n      <it-avatar :src=\"data?.avatar\" />\r\n      <div class=\"user-name\">\r\n        <span>{{ userName }}</span>\r\n        <span v-if=\"data.req_id\"\r\n          ><SplitButton\r\n            v-if=\"data?.accepted != undefined\"\r\n            :label=\"data?.accepted == 0 ? 'Принять' : 'Отклонить'\"\r\n            :model=\"ReqActions\"\r\n            @click=\"acceptUser\"\r\n            :class=\"{'p-button-gray': this.data.accepted == 1}\"\r\n            class=\"p-button-secondary\"\r\n        /></span>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport SplitButton from \"primevue/splitbutton\";\r\nexport default {\r\n  components: {\r\n    SplitButton,\r\n  },\r\n  props: [\"data\", \"index\"],\r\n  data() {\r\n    return {\r\n      isWaitingAction: false,\r\n      ReqActions: [\r\n        {\r\n          label: \"Изменить\",\r\n          icon: \"pi pi-pencil\",\r\n          command: () => {\r\n            if(this.isWaitingAction) return;\r\n            this.$emit('edit', this.index);\r\n          },\r\n        },\r\n        {\r\n          label: \"Удалить\",\r\n          icon: \"pi pi-times\",\r\n          command: () => {\r\n            if(this.isWaitingAction) return;\r\n            this.$emit('delete', this.index);\r\n          },\r\n        },\r\n        \r\n      ],\r\n    };\r\n  },\r\n  created(){},\r\n  computed: {\r\n    userName() {\r\n      return this.data?.name\r\n        ? this.data.name\r\n        : this.data.first_name + this.data.last_name;\r\n    },\r\n  },\r\n  methods:{\r\n    acceptUser(){\r\n      if(this.isWaitingAction) return;\r\n      this.isWaitingAction = true;\r\n      let obj = {\r\n        q: 'join_request_action',\r\n        me: this.$store.state.ME.data,\r\n        action: 'set_accepted',\r\n        accepted: this.data.accepted == false,\r\n        req_id: this.data.req_id,\r\n      }\r\n      console.log(obj);\r\n      this.axios.post(window.c.API, obj).then(itm=>{\r\n        console.log(itm.data);\r\n        if(itm.data?.data){\r\n          this.$emit('update_item', itm.data.data, this?.index);\r\n          this.isWaitingAction = false;\r\n        }\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n\r\n.p-button-gray.p-splitbutton button{\r\n  background-color: #F1F0F5 !important;\r\n  color: rgb(124, 124, 124) !important;\r\n  border-color: rgb(204, 204, 204) !important;\r\n}\r\n.user-item-name-row {\r\n  display: grid;\r\n  grid-template-columns: auto 1fr;\r\n}\r\n\r\n.user-item-name-row .user-name {\r\n  display: grid;\r\n  grid-template-columns: 1fr auto;\r\n  align-items: center;\r\n  margin: 3px 0px 3px 6px;\r\n}\r\n</style>"],"sourceRoot":""}]}